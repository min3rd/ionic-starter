<ion-header>
    <div class="navbar bg-primary">
        <div class="navbar-start">
            <ion-buttons>
                <ion-back-button></ion-back-button>
            </ion-buttons>
            @if (conversation) {
            <div class="font-semibold truncate">
                {{conversation.title}}
            </div>
            }
        </div>
        <div class="navbar-end">
            <ion-buttons>
                <ion-button>
                    <ion-icon slot="icon-only" name="search"></ion-icon>
                </ion-button>
                <ion-button id="more">
                    <ion-icon slot="icon-only" name="ellipsis-vertical"></ion-icon>
                </ion-button>
                <ion-popover trigger="more">
                    <ng-template>
                        <ion-content>
                            <ion-list>
                                <ion-item lines="none">
                                    <ion-icon name="people"></ion-icon>
                                    <ion-label class="ml-2">
                                        {{'members' | transloco | capitalize}}
                                    </ion-label>
                                </ion-item>
                                <ion-item lines="none">
                                    <ion-icon name="checkmark-circle"></ion-icon>
                                    <ion-label class="ml-2">
                                        {{'mark as readed' | transloco | capitalize}}
                                    </ion-label>
                                </ion-item>
                                <ion-item lines="none">
                                    <ion-icon name="trash"></ion-icon>
                                    <ion-label class="ml-2">
                                        {{'delete chat' | transloco | capitalize}}
                                    </ion-label>
                                </ion-item>
                            </ion-list>
                        </ion-content>
                    </ng-template>
                </ion-popover>
            </ion-buttons>
        </div>
    </div>
</ion-header>
<ion-content>
    @if (messages && messages.length) {
    @for (message of messages; track $index) {
    @if (message.sender == user.fullname) {
    <div class="chat chat-end">
        <div class="chat-image avatar">
            <div class="w-10 rounded-full">
                <img [src]="message.avatar" class="h-full" />
            </div>
        </div>
        <div class="chat-header">
            <time class="text-xs opacity-50">
                {{message.createdDate | date: 'HH:mm'}}
            </time>
        </div>
        <div class="chat-bubble chat-bubble-primary">
            {{message.content}}
        </div>
        <div class="chat-footer opacity-50">Delivered</div>
    </div>
    }
    @else {
    <div class="chat chat-start">
        <div class="chat-image avatar">
            <div class="w-10 rounded-full">
                <img [src]="message.avatar" class="h-full" />
            </div>
        </div>
        <div class="chat-header">
            {{message.sender}}
            <time class="text-xs opacity-50">
                {{message.createdDate | date: 'HH:mm'}}
            </time>
        </div>
        <div class="chat-bubble">
            {{message.content}}
        </div>
        <div class="chat-footer opacity-50">Seen at 12:46</div>
    </div>
    }
    }
    }
</ion-content>
<ion-footer>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-button>
                <ion-icon slot="icon-only" name="add"></ion-icon>
            </ion-button>
            <ion-button>
                <ion-icon slot="icon-only" name="image"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-input placeholder="{{'type your message' | transloco | capitalize}}"></ion-input>
        <ion-buttons slot="end">
            <ion-button>
                <ion-icon slot="icon-only" name="send"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-footer>